@page "/game"

@inject IJSRuntime JS

<h3>Game</h3>
@if( Field != null )
{
    <table id="game_field">
        <tbody>
            @for( int i = 0; i < Field.Field.Length; i++ )
            {
                <tr>
                    @for( int j = 0; j < Field.Field[i].Length; j++ )
                    {
                        var point = (i, j);
                        var id = $"cell_{i}_{j}";
                        <td>

                            <button id="@id" style="width:100%; height:100%" @onclick="() => ShowTd( point.i, point.j )"></button>
                        </td>
                    }
                </tr>
            }
        </tbody>
    </table>
}
else
{
    <h4>Loading...</h4>
}

@code {

    protected async Task ShowTd( int x, int y )
    {
        Console.WriteLine( $"{x} : {y}" );
        Console.WriteLine( Field.Field[x][y].Value );
        await JS.InvokeVoidAsync( "showSelectCell", new object[] { $"cell_{x}_{y}", Field.Field[x][y].Value } );
    }

    protected override Task OnInitializedAsync()
    {
        Init();
        return base.OnInitializedAsync();
    }
}
